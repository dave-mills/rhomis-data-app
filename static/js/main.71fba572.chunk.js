(this["webpackJsonprhomis-data-manager"]=this["webpackJsonprhomis-data-manager"]||[]).push([[0],{131:function(e,t,a){},151:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},171:function(e,t){},173:function(e,t){},193:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),c=a(34),o=a.n(c),s=(a(131),a(4)),l=(a(45),a(132),a(12)),i=a.n(l),d=a(5),j=a.n(d),u=a(9),h=a(213),b=a(209),m=a(118),p=a(205),f=a(50),O=a(91),x=a(11),g=(a(151),Object(r.createContext)()),v=a(1);function w(e){return null===e.email?(e.setRequestError("No email given"),!1):null!==e.password||(e.setRequestError("No password given"),!1)}function k(e){var t=Object(r.useContext)(g),a=Object(s.a)(t,2),n=(a[0],a[1]),c=Object(x.g)(),o=Object(r.useState)(""),l=Object(s.a)(o,2),i=l[0],d=l[1],f=Object(r.useState)(""),w=Object(s.a)(f,2),k=w[0],y=w[1],N=Object(r.useState)(""),D=Object(s.a)(N,2),C=D[0],T=D[1],F=Object(r.useState)(""),P=Object(s.a)(F,2),A=P[0],I=P[1];return Object(r.useEffect)((function(){var e=localStorage.getItem("userToken");console.log("Local Token"),console.log(e);var t=new Date,a=new Date(localStorage.getItem("createdAt"));if(console.log("Current date"),console.log(t),console.log("Token time"),console.log(a),console.log("Difference"),console.log(t.getTime()-a.getTime()),t.getTime()-a.getTime()<36e5)return n(e),void c.push("/")}),[]),Object(v.jsxs)(h.a,{className:"card-style border-0 login-card",children:[Object(v.jsx)(h.a.Header,{className:"bg-dark text-white",children:Object(v.jsx)("h2",{children:"Login"})}),Object(v.jsxs)(h.a.Body,{children:[Object(v.jsx)("div",{className:"icon-container",children:Object(v.jsx)(O.a,{size:60})}),Object(v.jsxs)(b.a,{style:{marginLeft:"2em",marginRight:"2em"},children:[Object(v.jsxs)(b.a.Group,{className:"form-group-spaced",children:[Object(v.jsx)(b.a.Label,{htmlFor:"email",children:"Email"}),Object(v.jsx)(b.a.Control,{id:"email",type:"text",onChange:function(e){return d(e.target.value)}})]}),Object(v.jsxs)(b.a.Group,{className:"form-group-spaced",children:[Object(v.jsx)(b.a.Label,{htmlFor:"password",children:"Password"}),Object(v.jsx)(b.a.Control,{type:"password",onChange:function(e){return y(e.target.value)}})]}),C?Object(v.jsx)("p",{className:"warning",children:C}):null,Object(v.jsx)("div",{className:"button-container",children:A?Object(v.jsxs)(m.a,{className:"login-buttons",variant:"dark",children:[Object(v.jsx)(p.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),"Loading"]}):Object(v.jsx)(m.a,{className:"login-buttons",variant:"dark",onClick:function(){var e=Object(u.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.next=3,S({event:t,email:i,password:k,requestError:C,setRequestError:T});case 3:if(a=e.sent,I(!1),400!==a.status){e.next=8;break}return c.push("/login"),e.abrupt("return");case 8:200===a.status&&(n(a.data),localStorage.setItem("userToken",a.data),r=new Date,localStorage.setItem("createdAt",r),c.push("/"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Login"})}),Object(v.jsxs)("div",{style:{textAlign:"center",width:"100%"},children:["Don't have an account?\xa0",Object(v.jsx)("a",{href:"/#/register",children:"Click here"})," for registration"]})]})]})]})}function S(e){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.event.preventDefault(),t.setRequestError(null),w({email:t.email,password:t.password,requestError:t.requestError,setRequestError:t.setRequestError}),e.prev=3,e.next=6,i()({method:"post",url:"https://auth.l-gorman.com/api/user/login",data:{email:t.email,password:t.password}});case 6:return a=e.sent,console.log(a),e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(3),t.setRequestError(e.t0.response.data),e.abrupt("return",e.t0.response);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}function N(e){var t=Object(r.useState)(!1),a=Object(s.a)(t,2),n=a[0],c=a[1];return Object(r.useEffect)((function(){c(!0)}),[]),Object(v.jsx)(f.a,{in:n,children:Object(v.jsx)("div",{className:"child-login-container",children:Object(v.jsx)(k,{})})})}var D=a(206),C=a(207),T=a(126);a(157);function F(e){if(null===e)return Object(v.jsx)("h1",{children:"No Data found"});if(void 0===e.length)return Object(v.jsx)("h1",{children:"No Data found"});if(null!==e){for(var t=e.slice(0,9),a=[],r=0;r<t.length;r++)for(var n=Object.keys(t[r]),c=0;c<n.length;c++){var o=n[c];if(!a.some((function(e){return e===o}))&&(0===r&&a.splice(c,0,o),r>0))if(void 0!==!n[c-1]){var s=a.indexOf(n[c-1]);a.splice(s+1,0,o)}else a.splice(c+1,0,o)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(D.a,{striped:!0,bordered:!0,hover:!0,size:"sm",variant:"dark",responsive:!0,children:[Object(v.jsx)("thead",{children:Object(v.jsx)("tr",{children:a.map((function(e,t){return Object(v.jsx)("th",{children:e},"row_1_column_"+t)}))},"row_1")}),Object(v.jsx)("tbody",{children:t.map((function(e,t){return Object(v.jsx)("tr",{children:a.map((function(a,r){return Object(v.jsx)("td",{children:e[a]},"row_"+t+"column_"+r+"_household_"+t)}))},"row_"+t)}))})]})})}}function P(e){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i()({method:"get",url:"https://api.l-gorman.com/api/meta-data/form-data",headers:{Authorization:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,a,r){return _.apply(this,arguments)}function _(){return(_=Object(u.a)(j.a.mark((function e(t,a,r,n){var c,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i()({method:"post",url:"https://api.l-gorman.com/api/data",data:{dataType:t,projectID:a,formID:r},headers:{Authorization:n}});case 2:if(c=e.sent,null!==(o=c.data)){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){var a=function(e){if(null!==e&&void 0!==e.length){for(var t=[],a=e,r=[],n=0;n<a.length;n++)for(var c=Object.keys(a[n]),o=0;o<c.length;o++){var s=c[o];if(!r.some((function(e){return e===s}))&&(0===n&&r.splice(o,0,s),n>0))if(void 0!==!c[o-1]){var l=r.indexOf(c[o-1]);r.splice(l+1,0,s)}else r.splice(o+1,0,s)}t.push(r.join(", "));var i=a.map((function(e){return r.map((function(t){return null!==e[t]?e[t]:""})).join(", ")}));return(t=t.concat(i)).join("\n")}}(e),r=new Blob([a],{type:"text/plain"});return""!==t&&window.URL.revokeObjectURL(t),window.URL.createObjectURL(r)}function L(e,t,a,r,n){if(t)return Object(v.jsx)("div",{className:"end-button-container",children:Object(v.jsx)("a",{download:r+"_"+n+"_"+a+"_.csv",href:e,children:Object(v.jsx)(m.a,{className:"end-button",children:"Download Data as CSV"})})})}function R(e,t){return null===t?e:t}function G(e,t,a,r,n,c,o,s){if(e){var l=t.map((function(e){return e.name})),i=[];if(null!==a){var d=t.filter((function(e){return e.name===a}));null!==d&&i.push(d[0].forms)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(h.a.Body,{children:[Object(v.jsx)("p",{children:'Please use the filters below to select the data you would like to access. If the data has not been processed, or you are unsure whether it has been processed, click the "Process Data" button. Then click "fetch" data to access a preview of the dataset and make it available for download'}),Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"button-row",children:[Object(v.jsx)(C.a,{className:"filter-button",onSelect:function(e){return r(e)},title:R("Project Name",a),children:l.map((function(e){return Object(v.jsx)(T.a.Item,{eventKey:e,children:e},e)}))}),Object(v.jsx)(C.a,{className:"filter-button",onSelect:function(e){return c(e)},title:R("Form ID",n),children:i.map((function(e){return Object(v.jsx)(T.a.Item,{eventKey:e,children:e},e)}))}),Object(v.jsxs)(C.a,{className:"filter-button",onSelect:function(e){return s(e)},title:R("Select Data to View",o),children:[Object(v.jsx)(T.a.Item,{eventKey:"processedData",children:"Whole Survey"}),Object(v.jsx)(T.a.Item,{eventKey:"indicatorData",children:"Indicator Data"}),Object(v.jsx)(T.a.Item,{eventKey:"metaData",children:"Meta Data"}),Object(v.jsx)(T.a.Item,{eventKey:"cropData",children:"Crop Data"}),Object(v.jsx)(T.a.Item,{eventKey:"livestockData",children:"Livestock Data"})]})]})})]})})}}function U(e,t,a,r,n){if(!a)return Object(v.jsxs)("div",{children:[Object(v.jsx)(h.a.Body,{children:Object(v.jsx)("p",{children:"Click the button below to begin querying the data. This will load information on the projects and forms used for various RHoMIS projects."})}),Object(v.jsx)("div",{className:"end-button-container",children:Object(v.jsx)(m.a,{"data-testid":"fetchProjectButton",className:"end-button",onClick:Object(u.a)(j.a.mark((function e(){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(n);case 2:void 0!==(a=e.sent)&&(t(a),r(!0));case 4:case"end":return e.stop()}}),e)}))),children:"Get Project Information"})})]})}function z(e,t,a,r,n,c,o,s,l){if(e)return Object(v.jsx)("div",{className:"end-button-container",children:Object(v.jsx)(m.a,{className:"end-button",onClick:Object(u.a)(j.a.mark((function e(){var i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t,a,r,l);case 2:i=e.sent,c(E(i,n)),o(i),s(!0);case 6:case"end":return e.stop()}}),e)}))),children:"Fetch Data"})})}function B(e,t,a){return H.apply(this,arguments)}function H(){return(H=Object(u.a)(j.a.mark((function e(t,a,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i()({method:"post",url:"https://api.l-gorman.com/api/process-data",data:{projectName:t,formName:a},headers:{Authorization:r}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t,a){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(j.a.mark((function e(t,a,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i()({method:"post",url:"https://api.l-gorman.com/api/generate-data",data:{projectName:t,formName:a,numberOfResponses:10},headers:{Authorization:r}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t,a,r){if(e)return Object(v.jsx)("div",{className:"end-button-container",children:Object(v.jsx)(m.a,{className:"end-button",onClick:Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t,a,r);case 2:e.sent;case 3:case"end":return e.stop()}}),e)}))),children:"Process Data"})})}function V(e,t,a,r){if(e)return Object(v.jsx)("div",{className:"end-button-container",children:Object(v.jsx)(m.a,{className:"end-button",onClick:Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t,a,r);case 2:e.sent;case 3:case"end":return e.stop()}}),e)}))),children:"Generate Data"})})}function Y(e){var t=Object(r.useState)(null),a=Object(s.a)(t,2),n=(a[0],a[1],Object(r.useContext)(g)),c=Object(s.a)(n,2),o=c[0],l=(c[1],Object(r.useState)(null)),i=Object(s.a)(l,2),d=i[0],j=i[1],u=Object(r.useState)(""),b=Object(s.a)(u,2),m=b[0],p=b[1],f=Object(r.useState)(!1),O=Object(s.a)(f,2),x=O[0],w=O[1],k=Object(r.useState)(!1),S=Object(s.a)(k,2),y=S[0],N=S[1],D=Object(r.useState)([]),C=Object(s.a)(D,2),T=C[0],P=C[1],A=Object(r.useState)(null),I=Object(s.a)(A,2),_=I[0],E=I[1],R=Object(r.useState)(null),B=Object(s.a)(R,2),H=B[0],q=B[1],M=Object(r.useState)(null),Y=Object(s.a)(M,2),J=Y[0],Q=Y[1];return Object(v.jsxs)("div",{id:"data-query-container",className:"sub-page-container",children:[Object(v.jsx)("h1",{id:"data-query-title",children:"RHoMIS 2.0 Data Querying"}),Object(v.jsxs)(h.a,{children:[Object(v.jsx)(h.a.Header,{className:"bg-dark text-white",children:"Data Filters"}),G(y,T,H,q,J,Q,_,E),U(0,P,y,N,o),V(y,H,J,o),K(y,H,J,o),z(y,_,H,J,m,p,j,w,o)]}),F(d),L(m,x,_,H,J)]})}var J=a(208),Q=a(117),W=(a(158),a(125)),X=a(121),Z=a.n(X);function $(e){return null===e.email?(e.setRequestError("No email given"),!1):null!==e.password||(e.setRequestError("No password given"),!1)}function ee(e){console.log(e);var t=Object(r.useState)(""),a=Object(s.a)(t,2),n=a[0],c=a[1],o=Object(r.useState)(""),l=Object(s.a)(o,2),i=l[0],d=l[1],f=Object(r.useState)(""),O=Object(s.a)(f,2),g=O[0],w=O[1],k=Object(r.useState)(""),S=Object(s.a)(k,2),y=S[0],N=S[1],D=Object(r.useState)(""),C=Object(s.a)(D,2),T=C[0],F=C[1],P=Object(r.useState)(""),A=Object(s.a)(P,2),I=A[0],_=A[1],E=Object(r.useState)(""),L=Object(s.a)(E,2),R=L[0],G=L[1],U=Object(r.useState)(!1),z=Object(s.a)(U,2),B=z[0],H=z[1],q=Object(r.useState)(null),M=Object(s.a)(q,2),K=M[0],V=M[1],Y=Object(r.useState)(null),X=Object(s.a)(Y,2),$=X[0],ee=X[1],ae=Object(x.g)(),re=i===g,ne=i.length>0&&g.length>0,ce=y===T,oe=y.length>0&&T.length>0,se=!0;return console.log(re),console.log(ne),console.log(ce),console.log(oe),console.log(n.length>0),console.log(I.length>0),console.log(R.length>0),console.log(ce),console.log(oe),console.log(n.length>0),console.log(I.length>0),console.log(R.length>0),console.log($),re&&ne&&ce&&oe&&n.length>0&&I.length>0&&R.length>0&&$&&(se=!1),Object(v.jsxs)(h.a,{className:"card-style border-0 registration-card",children:[Object(v.jsx)(h.a.Header,{className:"bg-dark text-white",children:Object(v.jsx)("h2",{children:"Signup"})}),Object(v.jsx)(h.a.Body,{children:Object(v.jsxs)(b.a,{style:{marginLeft:"3em",marginRight:"3em"},children:[Object(v.jsxs)(J.a,{children:[Object(v.jsx)(Q.a,{xs:3,children:Object(v.jsxs)(b.a.Group,{className:"form-group-spaced",children:[Object(v.jsx)(b.a.Label,{htmlFor:"email",children:"Title"}),Object(v.jsxs)(b.a.Select,{id:"title",defaultValue:"Select",onChange:function(e){return c(e.target.value)},children:[Object(v.jsx)("option",{disabled:"true",children:"Select"}),Object(v.jsx)("option",{value:"ms",children:"Ms"}),Object(v.jsx)("option",{value:"misss",children:"Miss"}),Object(v.jsx)("option",{value:"mrs",children:"Mrs"}),Object(v.jsx)("option",{value:"dr",children:"Dr"}),Object(v.jsx)("option",{value:"mr",children:"Mr"}),Object(v.jsx)("option",{value:"mx",children:"Mx"})]})]})}),Object(v.jsx)(Q.a,{xs:4,children:Object(v.jsxs)(b.a.Group,{className:"form-group-spaced",children:[Object(v.jsx)(b.a.Label,{htmlFor:"name",children:"First Name"}),Object(v.jsx)(b.a.Control,{id:"name",type:"text",onChange:function(e){return _(e.target.value)}})]})}),Object(v.jsx)(Q.a,{xs:5,children:Object(v.jsxs)(b.a.Group,{className:"form-group-spaced",children:[Object(v.jsx)(b.a.Label,{htmlFor:"surname",children:"Surname"}),Object(v.jsx)(b.a.Control,{id:"surname",type:"text",onChange:function(e){return G(e.target.value)}})]})})]}),Object(v.jsxs)(J.a,{children:[Object(v.jsx)(Q.a,{children:Object(v.jsxs)(b.a.Group,{className:"form-group-spaced",children:[Object(v.jsx)(b.a.Label,{htmlFor:"email",children:"Email"}),Object(v.jsx)(b.a.Control,{id:"email",type:"text",onChange:function(e){return N(e.target.value)}})]})}),Object(v.jsxs)(Q.a,{children:[Object(v.jsxs)(b.a.Group,{className:"form-group-spaced",children:[Object(v.jsx)(b.a.Label,{htmlFor:"email",children:"Confirm Email"}),Object(v.jsx)(b.a.Control,{id:"confirmemail",type:"text",onChange:function(e){return F(e.target.value)}})]}),oe?Object(v.jsx)(b.a.Text,{style:{textAlign:"end"},children:ce?"Emails match":"Emails don't match"}):Object(v.jsx)(v.Fragment,{})]})]}),Object(v.jsxs)(J.a,{children:[Object(v.jsxs)(Q.a,{children:[Object(v.jsxs)(b.a.Group,{className:"form-group-spaced",children:[Object(v.jsx)(b.a.Label,{htmlFor:"password",children:"Password"}),Object(v.jsx)(b.a.Control,{type:"password",onChange:function(e){d(e.target.value)}})]}),Object(v.jsx)(Z.a,{password:i})]}),Object(v.jsx)(Q.a,{children:Object(v.jsxs)(b.a.Group,{className:"form-group-spaced",children:[Object(v.jsx)(b.a.Label,{htmlFor:"password",children:"Confirm Password"}),Object(v.jsx)(b.a.Control,{type:"password",onChange:function(e){w(e.target.value)}}),ne?Object(v.jsx)(b.a.Text,{style:{textAlign:"end"},children:re?"Passwords match":"Passwords don't match"}):Object(v.jsx)(v.Fragment,{})]})})]}),K?Object(v.jsx)("p",{className:"warning",children:K}):null,Object(v.jsx)("div",{className:"icon-container",children:Object(v.jsx)(W.a,{sitekey:"6LfXLTsdAAAAAOqMXGb9rOqoIpGGPJN9HjcyoUYp",onChange:function(){var e=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(v.jsx)("div",{className:"button-container",children:B?Object(v.jsxs)(m.a,{className:"login-buttons",variant:"dark",children:[Object(v.jsx)(p.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),"Loading..."]}):Object(v.jsx)(m.a,{disabled:se,className:"login-buttons",variant:"dark",onClick:function(){var e=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),e.next=3,te({event:t,title:n,firstName:I,surname:R,email:y,password:i,captchaToken:$,requestError:K,setRequestError:V});case 3:a=e.sent,H(!1),(a.status>199||a.status<300)&&ae.push("/#/login"),console.log("registrationResult"),console.log(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Register"})}),Object(v.jsxs)("div",{style:{textAlign:"center",width:"100%"},children:["Already got an account?\xa0",Object(v.jsx)("a",{href:"/#/login",children:"Click here"})," for login"]})]})})]})}function te(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.event.preventDefault(),t.setRequestError(null),$({title:t.title,firstName:t.firstName,surname:t.surname,email:t.email,password:t.password,requestError:t.requestError,setRequestError:t.setRequestError,captchaToken:t.captchaToken}),e.prev=3,e.next=6,i()({method:"post",url:"https://auth.l-gorman.com/api/user/register",data:{title:t.title,firstName:t.firstName,surname:t.surname,email:t.email,password:t.password,captchaToken:t.captchaToken}});case 6:return a=e.sent,console.log(a),e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(3),console.log(e.t0),t.setRequestError(e.t0.response.data),e.abrupt("return",e.t0.response);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}function re(e){var t=Object(r.useState)(!1),a=Object(s.a)(t,2),n=a[0],c=a[1];return Object(r.useEffect)((function(){c(!0)}),[]),Object(v.jsx)(f.a,{in:n,children:Object(v.jsx)("div",{className:"child-login-container",children:Object(v.jsx)(ee,{})})})}var ne=a(29),ce=a(19),oe=a(122),se=a(123),le=a(44),ie=[{name:"Build a Survey",label:"surveyBuilder",text:"Get started straight away. Build a survey, collect test-data, and view your data.",icon:oe.a,link:"https://rhomis-survey.stats4sdtest.online/login/",external:!0},{name:"Manage My Projects",label:"projectManager",text:"Check up on your projects, download your data, and control user access.",icon:le.c,link:"/projects",external:!1},{name:"Collect Data",label:"dataCollector",text:"Collect data for an existing project and access enumerator training materials",icon:le.e,link:"/projects",external:!1},{name:"Global Dataset",label:"globalData",text:"Query publicly available survey data by time, location, and content.",icon:se.a,link:"/global-data",external:!1},{name:"Help",label:"help",text:"See guidance for more advanced use case and how to contribute to our system",icon:le.a,link:"https://rhomis-docs.readthedocs.io/en/latest/",external:!0},{name:"Administration",label:"administrator",text:"Create projects and forms (only used for development)",icon:le.b,link:"/administration",external:!1}];a(159);function de(e){return je.apply(this,arguments)}function je(){return(je=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i()({method:"get",url:"https://auth.l-gorman.com/api/user/",headers:{Authorization:t}});case 2:return a=e.sent,console.log(a.data),e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){var t=e.data.icon,a=Object(x.g)();return!1===e.data.external?Object(v.jsx)("div",{onClick:function(){a.push(e.data.link)},children:Object(v.jsxs)(h.a,{className:"sub-card portal-card border-0",children:[Object(v.jsx)("div",{className:"portal-card-header-container",children:Object(v.jsx)("h4",{className:"portal-card-header",children:e.data.name},"card-header-"+e.data.name)},"header-container-"+e.data.name),Object(v.jsx)("div",{className:"portal-icon-container",children:Object(v.jsx)(t,{size:100,color:"white"})},"icon-container-"+e.data.name)]},"card-"+e.data.name)}):!0===e.data.external&"surveyBuilder"===e.data.label?(console.log("Auth token"),console.log(e.authToken),Object(v.jsx)("div",{children:Object(v.jsxs)("form",{method:"post",action:e.data.link,class:"inline",children:[Object(v.jsx)("input",{type:"hidden",name:"token",value:e.authToken}),Object(v.jsx)("input",{type:"hidden",name:"redirect_url",value:"/admin/xlsform/create"}),Object(v.jsx)("button",{type:"submit",style:{margin:0,padding:0,border:0,backgroundColor:"white"},children:Object(v.jsxs)(h.a,{className:"sub-card portal-card border-0",children:[Object(v.jsx)("div",{className:"portal-card-header-container",children:Object(v.jsx)("h4",{className:"portal-card-header",children:e.data.name},"card-header-"+e.data.name)},"header-container-"+e.data.name),Object(v.jsx)("div",{className:"portal-icon-container",children:Object(v.jsx)(t,{size:100,color:"white"})},"icon-container-"+e.data.name)]},"card-"+e.data.name)})]})})):!0===e.data.external&"surveyBuilder"!==e.data.label?Object(v.jsx)("div",{children:Object(v.jsx)(ce.b,{style:{textDecoration:"none"},target:"_blank",to:{pathname:e.data.link},children:Object(v.jsxs)(h.a,{className:"sub-card portal-card border-0",children:[Object(v.jsx)("div",{className:"portal-card-header-container",children:Object(v.jsx)("h4",{className:"portal-card-header",children:e.data.name})}),Object(v.jsx)("div",{className:"portal-icon-container",children:Object(v.jsx)(t,{size:100,color:"white"})})]})})}):void 0}function he(e){var t=[];if(console.log(e.data[0]),console.log(e.userData),e.userData){if(!0===e.userData.basic){var a=e.data.filter((function(e){return"surveyBuilder"===e.label}));t.push.apply(t,Object(ne.a)(a))}if(e.userData.dataCollector.length>0){var r=e.data.filter((function(e){return"dataCollector"===e.label}));t.push.apply(t,Object(ne.a)(r))}if(e.userData.projectManager.length>0|e.userData.analyst.length>0){var n=e.data.filter((function(e){return"projectManager"===e.label}));t.push.apply(t,Object(ne.a)(n))}if(e.userData.researcher.length>0){var c=e.data.filter((function(e){return"globalData"===e.label}));t.push.apply(t,Object(ne.a)(c))}if(!0===e.userData.administrator){var o=e.data.filter((function(e){return"administrator"===e.label}));t.push.apply(t,Object(ne.a)(o))}if(!0===e.userData.basic){var s=e.data.filter((function(e){return"help"===e.label}));t.push.apply(t,Object(ne.a)(s))}}return e.userData||t.push(e.data[0]),Object(v.jsx)(v.Fragment,{children:t.map((function(t){return Object(v.jsx)(ue,{data:t,authToken:e.authToken})}))})}function be(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!1),o=Object(s.a)(c,2),l=(o[0],o[1]),i=Object(r.useContext)(g),d=Object(s.a)(i,2),b=d[0];d[1];return Object(r.useEffect)(Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(b);case 2:t=e.sent,n(t),l(!0);case 5:case"end":return e.stop()}}),e)}))),[]),Object(v.jsx)("div",{className:"sub-page-container",children:Object(v.jsxs)(h.a,{className:"main-card border-0",children:[Object(v.jsx)(h.a.Header,{className:"bg-dark text-white",children:Object(v.jsx)("h3",{children:"Portal"})}),Object(v.jsx)(h.a.Body,{className:"main-card-body",children:Object(v.jsx)(he,{data:ie,userData:a,authToken:b})})]})})}a(160);var me=Object(r.createContext)(),pe=(a(87),a(43)),fe=a(59),Oe=a.n(fe),xe=a(60);function ge(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i()({method:"get",url:"https://auth.l-gorman.com/api/meta-data/",headers:{Authorization:t.authToken}});case 2:a=e.sent,console.log("user info"),console.log(a.data),t.setUserInfo(a.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){var t=localStorage.getItem("userToken"),a=new Date,r=new Date(localStorage.getItem("createdAt"));return console.log("Difference"),console.log(a.getTime()-r.getTime()),a.getTime()-r.getTime()<36e5&&e.setAuthToken(t),t}function ke(e){return Se.apply(this,arguments)}function Se(){return(Se=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i()({method:"post",url:"https://api.l-gorman.com/api/project-data",headers:{Authorization:t.authToken},data:{projectName:t.projectName,formName:t.formName}});case 2:200===(a=e.sent).status&&t.setFormData(a.data),400===a.status&&alert(a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we({setAuthToken:t.setAuthToken});case 2:ge({authToken:a=e.sent,setUserInfo:t.setUserInfo}),ke({authToken:a,projectName:t.projectName,formName:t.formName,setFormData:t.setFormData});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(){return Object(v.jsx)("div",{children:Object(v.jsxs)(D.a,{striped:!0,bordered:!0,hover:!0,children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Project Name"},"table-head-item-1"),Object(v.jsx)("th",{children:"Description"},"table-head-item-2"),Object(v.jsx)("th",{children:"Created at"},"table-head-item-3")]},"table-row-1")},"table-header"),Object(v.jsx)("tbody",{children:Object(v.jsx)("tr",{children:Object(v.jsx)("td",{style:{"text-align":"center"},colSpan:3,children:"No projects found"})})})]})})}function Ce(e){var t=Object(x.g)();return console.log(e),e.data&&e.data.projects?0===e.data.projects.length?Object(v.jsx)(De,{}):void 0!==e.data.projects?Object(v.jsx)("div",{children:Object(v.jsxs)(D.a,{striped:!0,bordered:!0,hover:!0,children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Project Name"},"table-head-item-1"),Object(v.jsx)("th",{children:"Description"},"table-head-item-2"),Object(v.jsx)("th",{children:"Created at"},"table-head-item-3"),Object(v.jsx)("th",{},"table-head-item-4")]},"table-row-1")},"table-header"),Object(v.jsx)("tbody",{children:e.data.projects.map((function(e,a){var r=new Date(e.createdAt).toDateString();return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.name},"table-row-"+a+"-item-1"),Object(v.jsx)("td",{children:e.description},"table-row-"+a+"-item-2"),Object(v.jsx)("td",{children:r},"table-row-"+a+"-item-3"),Object(v.jsx)("td",{children:Object(v.jsx)(m.a,{className:"bg-dark text-white border-0",onClick:function(){t.push("/projects/"+e.name)},children:"Select"})},"table-row-"+a+"-item-4")]},"table-row-"+a)}))},"table-body")]})}):void 0:Object(v.jsx)(De,{})}function Te(e){var t=Object(x.g)(),a=Object(r.useContext)(g),n=Object(s.a)(a,2),c=n[0],o=(n[1],Object(r.useContext)(me)),l=Object(s.a)(o,2),i=l[0],d=l[1],b=Object(r.useState)([]),p=Object(s.a)(b,2),f=p[0],O=p[1],w=Object(r.useState)("Select a Project"),k=Object(s.a)(w,2),S=k[0],y=k[1],N=Object(r.useState)(!1),D=Object(s.a)(N,2),C=(D[0],D[1]),T=Object(r.useState)(!1),F=Object(s.a)(T,2),P=(F[0],F[1]);return Object(r.useEffect)(Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Effect running"),e.next=3,ge({authToken:c,setUserInfo:d});case 3:case"end":return e.stop()}}),e)}))),[]),Object(v.jsx)("div",{id:"project-management-container",className:"sub-page-container",children:Object(v.jsxs)(h.a,{className:"main-card border-0",children:[Object(v.jsx)(h.a.Header,{className:" bg-dark text-white",children:Object(v.jsxs)("div",{className:"main-card-header-container",children:[Object(v.jsx)("h3",{children:S}),Object(v.jsxs)("div",{style:{display:"flex","flex-direction":"row","margin-left":"auto"},children:[f?f.map((function(e){return Object(v.jsx)("div",{className:"main-card-header-item",children:e})})):"",f.length>0?Object(v.jsx)(m.a,{className:"bg-dark border-0",onClick:function(){!function(e){if(1===e.filters.length&&(e.setProjectSelected(!1),e.setFilters([]),e.setTitle("Select a Project")),2===e.filters.length){e.setFormSelected(!1);var t=e.filters[0];e.setFilters([t]),e.setTitle("Select a Form")}}({setProjectSelected:C,setFilters:O,filters:f,setFormSelected:P,setTitle:y})},children:Object(v.jsx)(pe.a,{size:25})}):Object(v.jsx)(m.a,{className:"bg-dark border-0",onClick:function(){t.push("/")},children:Object(v.jsx)(pe.a,{size:25})})]})]})}),Object(v.jsx)(h.a.Body,{className:"main-card-body",children:Object(v.jsx)(Ce,{data:i,setProjectSelected:C,filters:f,setFilters:O,setTitle:y})})]})})}function Fe(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Finalizing form"),e.next=3,i()({method:"post",url:"https://auth.l-gorman.com/api/forms/publish",headers:{Authorization:t.authToken},params:{form_name:t.form,project_name:t.project}});case 3:e.sent,ge({authToken:t.authToken,setUserInfo:t.setAdminData});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(){return Object(v.jsxs)(D.a,{striped:!0,bordered:!0,hover:!0,children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Form Name"}),Object(v.jsx)("th",{children:"Status"}),Object(v.jsx)("th",{children:"Created At"})]})}),Object(v.jsx)("tbody",{children:Object(v.jsx)("tr",{children:Object(v.jsx)("td",{colSpan:3,children:"Forms Not Found"})})})]})}function Ie(e){var t=Object(x.g)();console.log("Render project admin props"),console.log(e);var a=!1;if(!e.data)return Object(v.jsx)(Ae,{});if(!e.data.user)return Object(v.jsx)(Ae,{});if(!e.data.user.roles)return Object(v.jsx)(Ae,{});void 0!==e.data.user.roles.projectManager&&e.data.user.roles.projectManager.includes(e.projectSelected)&&(a=!0);var r=!1;if(void 0!==e.data.forms&&e.data.forms.length>0){var n=e.data.forms.filter((function(t){return t.project===e.projectSelected}));r=n.length>0,console.log("formsForProject"),console.log(n)}return Object(v.jsxs)(D.a,{striped:!0,bordered:!0,hover:!0,children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Form Name"}),Object(v.jsx)("th",{children:"Status"}),Object(v.jsx)("th",{children:"Created At"}),Object(v.jsx)("th",{style:{width:"40px"}}),Object(v.jsx)("th",{style:{width:"40px"}})]})}),Object(v.jsx)("tbody",{children:r?e.data.forms.map((function(r){var n=new Date(r.createdAt).toDateString();if(r.project===e.projectSelected){var c=!0;return!1===a&&(c=!1),r.draft&&(c=!1),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:r.name}),Object(v.jsx)("td",{children:r.draft?"Draft":"Finalized"}),Object(v.jsx)("td",{children:n}),Object(v.jsx)("td",{style:{width:"40px"},children:Object(v.jsx)(m.a,{disabled:c,className:"bg-dark text-white border-0",onClick:Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fe({form:r.name,project:e.projectSelected,authToken:e.authToken,setAdminData:e.setAdminData});case 2:t.sent;case 3:case"end":return t.stop()}}),t)}))),children:"Finalize"})}),Object(v.jsx)("td",{style:{width:"40px"},children:Object(v.jsx)(m.a,{className:"bg-dark text-white border-0",onClick:function(){t.push("/projects/"+e.projectSelected+"/forms/"+r.name)},children:"Select"})})]})}})):Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("tr",{children:Object(v.jsx)("td",{style:{"text-align":"center"},colSpan:5,children:"No forms created yet"})})})})]})}function _e(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i()({method:"post",url:"https://auth.l-gorman.com/api/user/project-manager",headers:{Authorization:t.authToken},data:{projectName:t.projectName,email:t.email}});case 3:return a=e.sent,console.log(a),e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Le(e){var t=!1,a=Object(r.useState)(""),n=Object(s.a)(a,2),c=n[0],o=n[1];return e.data&&e.data.user&&e.data.user.roles?(void 0!==e.data.user.roles.projectManager&&e.data.user.roles.projectManager.includes(e.projectSelected)&&(t=!0),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(h.a,{className:"project-management-card",children:[Object(v.jsx)(h.a.Header,{as:"h5",children:"Select a Form"}),Object(v.jsx)(h.a.Body,{children:Object(v.jsx)(Ie,{projectSelected:e.projectSelected,authToken:e.authToken,setAdminData:e.setAdminData,data:e.data,filters:e.filters,setFilters:e.setFilters,setFormSelected:e.setFormSelected})})]}),t?Object(v.jsxs)(h.a,{className:"project-management-card",children:[Object(v.jsx)(h.a.Header,{as:"h5",children:"Add Project Manager"}),Object(v.jsx)(h.a.Body,{children:Object(v.jsxs)(b.a,{children:[Object(v.jsxs)(b.a.Group,{children:[Object(v.jsx)(b.a.Label,{children:"User email"}),Object(v.jsx)(b.a.Control,{onChange:function(e){o(e.target.value)}})]}),Object(v.jsx)(m.a,{className:"bg-dark text-white border-0 float-right",style:{marginTop:"10px"},onClick:Object(u.a)(j.a.mark((function t(){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.projectSelected),t.next=3,_e({email:c,projectName:e.projectSelected,authToken:e.authToken});case 3:a=t.sent,console.log(a);case 5:case"end":return t.stop()}}),t)}))),children:"Add Project Manager"})]})})]}):Object(v.jsx)(v.Fragment,{})]})):Object(v.jsx)(Ae,{})}var Re=function(){var e=Object(x.g)(),t=Object(x.h)().projectName,a=Object(r.useContext)(g),n=Object(s.a)(a,2),c=n[0],o=(n[1],Object(r.useContext)(me)),l=Object(s.a)(o,2),i=l[0],d=l[1];console.log("admin data"),console.log(i);var j=Object(r.useState)(null),u=Object(s.a)(j,2),b=u[0],p=u[1],f=Object(r.useState)(null),O=Object(s.a)(f,2),w=O[0],k=O[1];return Object(r.useEffect)((function(){ge({authToken:c,setUserInfo:d})}),[]),Object(v.jsx)("div",{id:"project-management-container",className:"sub-page-container",children:Object(v.jsxs)(h.a,{className:"main-card border-0",children:[Object(v.jsx)(h.a.Header,{className:" bg-dark text-white",children:Object(v.jsxs)("div",{className:"main-card-header-container",children:[Object(v.jsx)("h3",{children:"Form Overview"}),Object(v.jsxs)("div",{style:{display:"flex","flex-direction":"row","margin-left":"auto"},children:[Object(v.jsx)("div",{className:"main-card-header-item",children:t}),Object(v.jsx)(m.a,{className:"bg-dark border-0",onClick:function(){e.push("/projects")},children:Object(v.jsx)(pe.a,{size:25})})]})]})}),Object(v.jsx)(h.a.Body,{className:"main-card-body",children:Object(v.jsx)(Le,{authToken:c,projectSelected:t,formSelected:b,setAdminData:d,data:i,setFormSelected:p,filters:w,setFilters:k})})]})})};function Ge(e){if(null!==e){for(var t=e.slice(0,9),a=[],r=0;r<t.length;r++)for(var n=Object.keys(t[r]),c=0;c<n.length;c++){var o=n[c];if(!a.some((function(e){return e===o}))&&(0===r&&a.splice(c,0,o),r>0))if(void 0!==!n[c-1]){var s=a.indexOf(n[c-1]);a.splice(s+1,0,o)}else a.splice(c+1,0,o)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(D.a,{striped:!0,hover:!0,size:"sm",responsive:!0,children:[Object(v.jsx)("thead",{children:Object(v.jsx)("tr",{children:a.map((function(e,t){return Object(v.jsx)("th",{className:"col-md-1",children:e},"row_1_column_"+t)}))},"row_1")}),Object(v.jsx)("tbody",{children:t.map((function(e,t){return Object(v.jsx)("tr",{children:a.map((function(a,r){return Object(v.jsx)("td",{height:"10px",children:e[a]?e[a]:"NA"},"row_"+t+"column_"+r+"_household_"+t)}))},"row_"+t)}))})]})})}}function Ue(e){return ze.apply(this,arguments)}function ze(){return(ze=Object(u.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching unit data"),console.log(t),e.next=4,i()({method:"post",url:"https://api.l-gorman.com/api/data",data:{dataType:t.dataType,projectID:t.projectID,formID:t.formID,unit:t.unit,data:t.data},headers:{Authorization:t.authToken}});case 4:if(a=e.sent,null!==(r=a.data)){e.next=10;break}return e.abrupt("return",null);case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e,t){var a=function(e){if(null!==e&&void 0!==e.length){for(var t=[],a=e,r=[],n=0;n<a.length;n++)for(var c=Object.keys(a[n]),o=0;o<c.length;o++){var s=c[o];if(!r.some((function(e){return e===s}))&&(0===n&&r.splice(o,0,s),n>0))if(void 0!==!c[o-1]){var l=r.indexOf(c[o-1]);r.splice(l+1,0,s)}else r.splice(o+1,0,s)}t.push(r.join(", "));var i=a.map((function(e){return r.map((function(t){return null!==e[t]?e[t]:""})).join(", ")}));return(t=t.concat(i)).join("\n")}}(e),r=new Blob([a],{type:"text/plain"});return""!==t&&window.URL.revokeObjectURL(t),window.URL.createObjectURL(r)}function He(e){return qe.apply(this,arguments)}function qe(){return(qe=Object(u.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data.forms.filter((function(e){return e.name===t.formSelected&&e.project===t.projectSelected}))[0],e.next=3,i()({method:"post",url:"https://api.l-gorman.com/api/process-data",headers:{Authorization:t.authToken},data:{commandType:t.commandType,projectName:t.projectSelected,formName:t.formSelected,formVersion:a.formVersion,draft:t.draft}});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(u.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="","dataCollector"===t.userType&&(a="https://auth.l-gorman.com/api/user/data-collector"),"analyst"===t.userType&&(a="https://auth.l-gorman.com/api/user/analyst"),e.prev=3,e.next=6,i()({method:"post",url:a,headers:{Authorization:t.authToken},data:{formName:t.formName,email:t.email}});case 6:return r=e.sent,console.log(r),e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}function Ve(e){var t=Object(r.useState)(""),a=Object(s.a)(t,2),n=a[0],c=a[1],o=Object(r.useState)(""),l=Object(s.a)(o,2),i=l[0],d=l[1];return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(b.a,{children:[Object(v.jsxs)(b.a.Group,{children:[Object(v.jsx)(b.a.Label,{children:"User email"}),Object(v.jsx)(b.a.Control,{onChange:function(e){d(e.target.value),console.log(e.target.value)}})]}),Object(v.jsxs)(b.a.Group,{children:[Object(v.jsx)(b.a.Label,{children:"User Role"}),Object(v.jsxs)(b.a.Select,{"aria-label":"Default select example",defaultValue:"Open this select menu",onChange:function(e){c(e.target.value),console.log(e.target.value)},children:[Object(v.jsx)("option",{disabled:!0,children:"Open this select menu"}),Object(v.jsx)("option",{value:"dataCollector",children:"Data Collector: Can access training materials and configure enumerator devices"}),Object(v.jsx)("option",{value:"analyst",children:"Data Analyst: Can download processed data"})]})]}),Object(v.jsx)(m.a,{className:"bg-dark text-white border-0 float-right",style:{marginTop:"10px"},onClick:Object(u.a)(j.a.mark((function t(){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(i),t.next=3,Me({authToken:e.authToken,email:i,formName:e.formSelected,userType:n});case 3:a=t.sent,console.log(a);case 5:case"end":return t.stop()}}),t)}))),children:"Add User"})]})})}function Ye(e){var t=Object(r.useState)(!1),a=Object(s.a)(t,2),n=a[0],c=a[1],o=Object(r.useState)(!0),l=Object(s.a)(o,2),i=l[0],d=l[1],p=Object(r.useState)(null),f=Object(s.a)(p,2),O=f[0],x=f[1],g=Object(r.useState)(null),w=Object(s.a)(g,2),k=w[0],S=w[1],y=Object(r.useState)(null),N=Object(s.a)(y,2),D=N[0],C=N[1],T=Object(r.useState)(null),F=Object(s.a)(T,2),P=F[0],A=F[1],I=Object(r.useState)(""),_=Object(s.a)(I,2),E=_[0],L=_[1],R=Object(r.useState)(""),G=Object(s.a)(R,2),U=G[0],z=G[1];return e.data?(console.log("form props"),console.log(e),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(h.a,{className:"project-management-card",children:[Object(v.jsx)(h.a.Header,{children:"Collect Data"}),Object(v.jsxs)(h.a.Body,{children:[Object(v.jsxs)("p",{children:["To start collecting data and submitting completed surveys you will need to make sure you have installed the ODK Collect App on your android device. To install ODK collect, scan ",Object(v.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),c(!n)},className:"qr-code-link",children:"this QR code"})," or search for ODK collect on the Google Play Store."]}),n?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"qr-code-container",children:Object(v.jsx)(Oe.a,{value:"https://play.google.com/store/apps/details?id=org.odk.collect.android&hl=en_GB&gl=US"})}),Object(v.jsx)("div",{className:"qr-code-container",children:Object(v.jsx)(m.a,{className:"bg-dark border-0",onClick:function(){c(!1)},children:"Hide Code"})})]}):Object(v.jsx)(v.Fragment,{}),Object(v.jsxs)("p",{children:['Once you have installed ODK collect, you will need to configure the app to access RHoMIS forms. Open the app. If this is your first time using ODK there will be an option to "Configure with QR code". Use ',Object(v.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),d(!i)},className:"qr-code-link",children:"this QR code"}),". If you have used the App before, you will need to add this form."]}),i?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"qr-code-container",children:Object(v.jsx)(Oe.a,{value:e.formState.encoded_settings})}),Object(v.jsx)("div",{className:"qr-code-container",children:Object(v.jsx)(m.a,{className:"bg-dark border-0",onClick:function(){d(!1)},children:"Hide Code"})})]}):Object(v.jsx)(v.Fragment,{}),e.formState.draft?Object(v.jsx)("h4",{children:"***Your form is currently saved as a draft. Any submissions you make will be removed once the form is finalised*** "}):Object(v.jsx)(v.Fragment,{}),e.formState.draft?Object(v.jsxs)(v.Fragment,{children:["As this is a draft form. You might like to quickly see what the data you collect might look like. Click the button below to generate some mock data. Please note, that values are randomly generated.",Object(v.jsx)("br",{}),Object(v.jsx)(m.a,{className:"bg-dark border-0",style:{margin:"10px"},onClick:Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,He({commandType:"generate",draft:e.formState.draft,authToken:e.authToken,data:e.data,formSelected:e.formSelected,projectSelected:e.projectSelected});case 2:console.log("gen data");case 3:case"end":return t.stop()}}),t)}))),children:"Generate Data"})," "]}):Object(v.jsx)(v.Fragment,{})]})]}),e.formState.dataAnalystOfForm|e.formState.projectManagerOfForm?Object(v.jsxs)(h.a,{className:"project-management-card",children:[Object(v.jsx)(h.a.Header,{children:"Processing Data"}),Object(v.jsxs)(h.a.Body,{children:["During data-collection, enumerators have the opportunity to input new units. We need to know the numeric conversions for these units in order calculate key indicators (e.g. crop yield). ",Object(v.jsx)("br",{}),Object(v.jsx)(m.a,{className:"bg-dark border-0",style:{margin:"10px"},onClick:Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,He({commandType:"units",draft:e.formState.draft,authToken:e.authToken,data:e.data,formSelected:e.formSelected,projectSelected:e.projectSelected});case 2:console.log("gen data");case 3:case"end":return t.stop()}}),t)}))),children:"Extract Units"}),Object(v.jsx)("br",{}),"Once you have converted your units, the data-set can be processed to calculate key information ",Object(v.jsx)("br",{}),Object(v.jsx)(m.a,{className:"bg-dark border-0",style:{margin:"10px"},onClick:Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,He({commandType:"process",draft:e.formState.draft,authToken:e.authToken,data:e.data,formSelected:e.formSelected,projectSelected:e.projectSelected});case 2:console.log("gen data");case 3:case"end":return t.stop()}}),t)}))),children:"Process Data"})]})]}):Object(v.jsx)(v.Fragment,{}),e.formState.renderUnitsForm?Object(v.jsxs)(h.a,{className:"project-management-card",children:[Object(v.jsx)(h.a.Header,{children:"Download Units"}),Object(v.jsxs)(h.a.Body,{children:[Object(v.jsx)(b.a,{children:Object(v.jsxs)(b.a.Group,{children:[Object(v.jsx)(b.a.Label,{children:"Select the Type of Unit"}),Object(v.jsxs)(b.a.Select,{defaultValue:"Select",onChange:function(){var t=Object(u.a)(j.a.mark((function t(a){var r,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(a.target.value),t.next=3,Ue({authToken:e.authToken,dataType:a.target.value,projectID:e.projectSelected,formID:e.formSelected,unit:!0,data:!1});case 3:r=t.sent,n=Be(r,E),L(n),C(r),console.log("units data"),console.log(r);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[Object(v.jsx)("option",{disabled:!0,children:"Select"},"default-select"),e.formData.units.map((function(e){return Object(v.jsx)("option",{children:e},"unit-option-"+e)}))]})]})}),D?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("br",{}),Ge(D),Object(v.jsx)("a",{download:e.projectSelected+"_"+e.formSelected+"_"+O+".csv",href:E,children:Object(v.jsx)(m.a,{className:"bg-dark border-0",children:"Download Data"})})]}):Object(v.jsx)(v.Fragment,{})]})]}):Object(v.jsx)(v.Fragment,{}),e.formState.renderDataForm?Object(v.jsxs)(h.a,{className:"project-management-card",children:[Object(v.jsx)(h.a.Header,{children:"Download Data"}),Object(v.jsxs)(h.a.Body,{children:[Object(v.jsx)(b.a,{children:Object(v.jsxs)(b.a.Group,{children:[Object(v.jsx)(b.a.Label,{children:"Select the type of data"}),Object(v.jsxs)(b.a.Select,{defaultValue:"Select",onChange:function(){var t=Object(u.a)(j.a.mark((function t(a){var r,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return S(a.target.value),t.next=3,Ue({authToken:e.authToken,dataType:a.target.value,projectID:e.projectSelected,formID:e.formSelected,unit:!1,data:!0});case 3:r=t.sent,n=Be(r,U),z(n),A(r),console.log("rhomis data"),console.log(r);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[Object(v.jsx)("option",{disabled:!0,children:"Select"},"default-select"),e.formData.dataSets.map((function(e){return Object(v.jsx)("option",{children:e},"data-option-"+e)}))]})]})}),P?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("br",{}),Ge(P),Object(v.jsx)("a",{download:e.projectSelected+"_"+e.formSelected+"_"+k+".csv",href:U,children:Object(v.jsx)(m.a,{className:"bg-dark border-0",children:"Download Data"})})]}):Object(v.jsx)(v.Fragment,{})]})]}):Object(v.jsx)(v.Fragment,{}),e.formState.projectManagerOfForm?Object(v.jsxs)(h.a,{className:"project-management-card",children:[Object(v.jsx)(h.a.Header,{as:"h5",children:"Manage Users"}),Object(v.jsx)(h.a.Body,{children:Object(v.jsx)(Ve,{authToken:e.authToken,formSelected:e.formSelected,projectSelected:e.projectSelected})})]}):Object(v.jsx)(v.Fragment,{})]})):Object(v.jsx)(v.Fragment,{})}function Je(){var e=Object(x.g)(),t=Object(x.h)().projectName,a=Object(x.h)().formName,n=Object(r.useContext)(g),c=Object(s.a)(n,2),o=c[0],l=c[1],i=Object(r.useContext)(me),d=Object(s.a)(i,2),b=d[0],p=d[1],f=Object(r.useState)(),O=Object(s.a)(f,2),w=O[0],k=O[1],S=Object(r.useState)({renderODKFormCode:!1,renderUnitsForm:!1,renderDataForm:!1,projectManagerOfForm:!1,dataAnalystOfForm:!1,odkConf:!1,encoded_settings:!1,draft:!1}),y=Object(s.a)(S,2),N=y[0],D=y[1];return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye({setAuthToken:l,authToken:o,setUserInfo:p});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){console.log("form data changed");var e,r=(e={data:b,formData:w,formSelected:a,projectSelected:t},console.log("Initial form state props"),console.log(e),{renderODKFormCode:function(e){return!!e.data&&!!e.data.forms&&1===e.data.forms.filter((function(t){return t.name===e.formSelected&t.project===e.projectSelected})).length}({data:e.data,formSelected:e.formSelected,projectSelected:e.projectSelected}),renderUnitsForm:function(e){return!!e.formData&&!!e.formData.units&&e.formData.units.length>0&&(console.log("Number of forms"),console.log(e.formData.units.length),!0)}({formData:e.formData}),renderDataForm:function(e){return!!(e.formData&&e.formData.dataSets.length>0)}({formData:e.formData}),projectManagerOfForm:function(e){return console.log("Project manager props"),console.log(e),!!e.data&&!!e.data.user&&!!e.data.user.roles&&!!e.data.user.roles.projectManager&&!!e.data.user.roles.projectManager.includes(e.projectSelected)}({data:e.data,projectSelected:e.projectSelected}),dataAnalystOfForm:function(e){return!!e.data&&!!e.data.user&&!!e.data.user.roles&&!!e.data.user.roles.dataCollector&&!!e.data.user.roles.dataCollector.includes(e.formSelected)}({data:e.data,formSelected:e.formSelected}),odkConf:function(e){if(console.log("odk conf args"),console.log(e),!e.data)return!1;if(!e.data.forms)return!1;var t=e.data.forms.filter((function(t){return t.name===e.formSelected&&t.project===e.projectSelected}));return 1===t.length&&(!0===t[0].draft?t[0].draftCollectionDetails:!1===t[0].draft&&t[0].collectionDetails)}({data:e.data,projectSelected:e.projectSelected,formSelected:e.formSelected}),encoded_settings:function(e){if(!e.data)return!1;if(!e.data.forms)return!1;var t=e.data.forms.filter((function(t){return t.name===e.formSelected&&t.project===e.projectSelected}));if(1!==t.length)return!1;if(!0===t[0].draft){var a=t[0].draftCollectionDetails;return Object(xe.deflateSync)(JSON.stringify(a)).toString("base64")}if(!1===t[0].draft){var r=t[0].collectionDetails;return Object(xe.deflateSync)(JSON.stringify(r)).toString("base64")}return!1}({data:e.data,projectSelected:e.projectSelected,formSelected:e.formSelected}),draft:function(e){if(!e.data)return!1;if(!e.data.forms)return!1;var t=e.data.forms.filter((function(t){return t.name===e.formSelected&&t.project===e.projectSelected}));return 1===t.length&&(!0===t[0].draft||(t[0].draft,!1))}({data:e.data,projectSelected:e.projectSelected,formSelected:e.formSelected})});console.log("New form admin state"),console.log(r),D(r)}),[w,b,a,t]),Object(v.jsx)("div",{id:"project-management-container",className:"sub-page-container",children:Object(v.jsxs)(h.a,{className:"main-card border-0",children:[Object(v.jsx)(h.a.Header,{className:" bg-dark text-white",children:Object(v.jsxs)("div",{className:"main-card-header-container",children:[Object(v.jsx)("h3",{children:"Form Overview"}),Object(v.jsxs)("div",{style:{display:"flex","flex-direction":"row","margin-left":"auto"},children:[Object(v.jsx)("div",{className:"main-card-header-item",children:t}),Object(v.jsx)("div",{className:"main-card-header-item",children:a}),Object(v.jsx)(m.a,{className:"bg-dark border-0",onClick:function(){e.push("/projects/"+t)},children:Object(v.jsx)(pe.a,{size:25})})]})]})}),Object(v.jsx)(h.a.Body,{className:"main-card-body",children:Object(v.jsx)(Ye,{authToken:o,setAdminData:p,data:b,formSelected:a,projectSelected:t,formData:w,setFormData:k,formState:N,setFormState:D})})]})})}var Qe=a(212),We=a(211),Xe=a(124);a(193);function Ze(e){return $e.apply(this,arguments)}function $e(){return($e=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("authToken: ",t.authToken),e.next=3,i()({method:"get",url:"https://auth.l-gorman.com/api/meta-data",headers:{Authorization:t.authToken}});case 3:a=e.sent,console.log("response: "),console.log(a),200===a.status&&(console.log("Setting project information"),a.data.projects.length>0&&t.setShowProjectManagement(!0),!0===a.data.user.roles.administrator&&t.setShowAdmin(!0),a.data.user.roles.dataCollector.length>0&&t.setShowCollectData(!0)),400===a.status&&alert(a.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e){console.log("Survey builder url: "+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RECAPTCHA_SITE_KEY:"6LfXLTsdAAAAAOqMXGb9rOqoIpGGPJN9HjcyoUYp",REACT_APP_ENV:"staging",REACT_APP_AUTHENTICATOR_URL:"https://auth.l-gorman.com/",REACT_APP_SURVEY_BUILDER_URL:"https://rhomis-survey.stats4sdtest.online/login",REACT_APP_API_URL:"https://api.l-gorman.com/"}).SURVEY_BUILDER_URL);var t=Object(r.useContext)(g),a=Object(s.a)(t,2),n=a[0],c=a[1],o=Object(r.useState)(!1),l=Object(s.a)(o,2),i=l[0],d=l[1],h=function(){return d(!1)},b=function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d(!0));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=Object(r.useState)(!1),p=Object(s.a)(m,2),f=p[0],O=p[1],x=Object(r.useState)(!1),w=Object(s.a)(x,2),k=w[0],S=w[1],y=Object(r.useState)(!1),N=Object(s.a)(y,2),D=N[0],C=N[1];return Object(r.useEffect)(Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze({authToken:n,setShowAdmin:O,setShowCollectData:S,setShowProjectManagement:C});case 2:case"end":return e.stop()}}),e)}))),[]),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(Qe.a,{fixed:"top",bg:"dark",variant:"dark",expand:"false",children:[Object(v.jsx)("div",{className:"menu-button",onClick:b,children:Object(v.jsx)(le.d,{className:"menu-button-icon",size:30})}),Object(v.jsx)("h2",{style:{color:"white"},children:"RHoMIS"}),Object(v.jsx)(We.a.Link,{className:"logout-button",as:ce.b,to:"/login",onClick:function(){c(null),localStorage.clear()},children:"Logout"}),Object(v.jsxs)(Xe.a,{backdrop:"true",style:{"background-color":"#212529",width:"25%"},id:"offcanvasNavbar","aria-labelledby":"offcanvasNavbarLabel",placement:"start",show:i,onHide:h,children:[Object(v.jsx)(Xe.a.Header,{closeVariant:"white",closeButton:!0,style:{color:"white","background-color":"#212529"},children:Object(v.jsx)(Xe.a.Title,{id:"offcanvasNavbarLabel",children:Object(v.jsx)("h2",{style:{"padding-left":"20px"},children:"Dashboard"})})}),Object(v.jsxs)("div",{className:"side-bar-container",children:[Object(v.jsx)("div",{className:"side-bar-item",children:Object(v.jsx)(We.a.Link,{className:"side-bar-link",as:ce.b,onClick:function(){h()},to:"/",children:"Portal"})}),Object(v.jsx)("div",{className:"side-bar-item",children:Object(v.jsxs)("form",{style:{width:"100%"},method:"post",action:"https://rhomis-survey.stats4sdtest.online/login",class:"inline",children:[Object(v.jsx)("input",{type:"hidden",name:"token",value:n}),Object(v.jsx)("input",{type:"hidden",name:"redirect_url",value:"/admin/xlsform/create"}),Object(v.jsx)("input",{className:"form-link",type:"submit",value:"Design a Survey"})]})}),D?Object(v.jsx)("div",{className:"side-bar-item",children:Object(v.jsx)(We.a.Link,{className:"side-bar-link",as:ce.b,onClick:function(){h()},to:"/projects",children:"Manage Projects"})}):Object(v.jsx)(v.Fragment,{}),k?Object(v.jsx)("div",{className:"side-bar-item",children:Object(v.jsx)(We.a.Link,{className:"side-bar-link",as:ce.b,onClick:function(){h()},to:"/projects",children:"Collect Data"})}):Object(v.jsx)(v.Fragment,{}),f?Object(v.jsx)("div",{className:"side-bar-item",children:Object(v.jsx)(We.a.Link,{className:"side-bar-link",as:ce.b,onClick:function(){h()},to:"/administration",children:"Administration"})}):Object(v.jsx)(v.Fragment,{}),Object(v.jsx)("div",{className:"side-bar-item",children:Object(v.jsx)(We.a.Link,{className:"side-bar-link",as:ce.b,to:"/login",onClick:function(){c(null),localStorage.clear()},children:"Logout"})})]})]})]})})}var tt=a(210);a(196);function at(e){return rt.apply(this,arguments)}function rt(){return(rt=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("authToken: ",t.authToken),e.next=3,i()({method:"get",url:"https://auth.l-gorman.com/api/meta-data",headers:{Authorization:t.authToken}});case 3:a=e.sent,console.log("response: "),console.log(a),200===a.status&&(console.log("Setting project information"),console.log(a.data),t.setProjectInformation(a.data)),400===a.status&&alert(a.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e,t,a){return ct.apply(this,arguments)}function ct(){return(ct=Object(u.a)(j.a.mark((function e(t,a,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),console.log(t),e.next=4,i()({method:"post",url:"https://auth.l-gorman.com/api/projects/create",data:{name:a,description:r},headers:{Authorization:t}});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e,t){return st.apply(this,arguments)}function st(){return(st=Object(u.a)(j.a.mark((function e(t,a){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),console.log(t),e.next=4,i()({method:"delete",url:"https://auth.l-gorman.com/api/projects/delete",data:{name:a},headers:{Authorization:t}});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(e,t,a,r,n){return it.apply(this,arguments)}function it(){return(it=Object(u.a)(j.a.mark((function e(t,a,r,n,c){var o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),console.log("https://auth.l-gorman.com/api/forms/new?form_name="+r+"&form_version="+n+"&project_name="+a+"&publish=false"),e.next=4,i()({method:"post",url:"https://auth.l-gorman.com/api/forms/new?form_name="+r+"&form_version="+n+"&project_name="+a+"&publish=false",data:c,headers:{Authorization:t,"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}});case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e,t,a,r,n){return jt.apply(this,arguments)}function jt(){return(jt=Object(u.a)(j.a.mark((function e(t,a,r,n,c){var o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i()({method:"post",url:"https://auth.l-gorman.com/api/forms/new-draft?form_name="+r+"&form_version="+n+"&project_name="+a+"&publish=false",data:c,headers:{Authorization:t,"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}});case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(b.a,{children:[Object(v.jsxs)(b.a.Group,{children:[Object(v.jsx)(b.a.Label,{children:"Project Name"}),Object(v.jsx)(b.a.Control,{type:"text",onChange:function(t){e.setNewProjectName(t.target.value)}})]}),Object(v.jsxs)(b.a.Group,{children:[Object(v.jsx)(b.a.Label,{children:"Project Description"}),Object(v.jsx)(b.a.Control,{as:"textarea",rows:3,onChange:function(t){e.setNewProjectDescription(t.target.value)}})]})]}),Object(v.jsx)(m.a,{style:{"text-align":"right"},onClick:Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nt(e.authToken,e.newProjectName,e.newProjectDescription);case 2:return t.next=4,e.GetProjectInformation({authToken:e.authToken,setProjectInformation:e.setProjectInformation});case 4:case"end":return t.stop()}}),t)}))),children:"Add project"})]})}function ht(e){console.log(e.data);var t=["No Projects"],a=!0;return void 0!==e.data&null!==e.data&&(void 0!==e.data.projects&&(t=e.data.projects.map((function(e){return e.name})),a=!1),0===e.data.projects.length&&(t=["No Projects"],a=!0)),console.log(t),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(b.a,{children:[Object(v.jsxs)(b.a.Group,{children:[Object(v.jsx)(b.a.Label,{children:"Select a Project"}),Object(v.jsxs)(b.a.Select,{defaultValue:"Select a Project",onChange:function(t){e.setSelectedProject(t.target.value)},disabled:a,"aria-label":"Default select example",children:[Object(v.jsx)("option",{disabled:!0,children:"Select a Project"}),t.map((function(e){return Object(v.jsx)("option",{children:e})}))]})]}),Object(v.jsxs)(b.a.Group,{children:[Object(v.jsx)(b.a.Label,{children:"Enter the name of the form"}),Object(v.jsx)(b.a.Control,{onChange:function(t){e.setNewFormName(t.target.value)}}),Object(v.jsx)(b.a.Text,{children:'This must match the "form_title" field in your xlsx form settings'})]}),Object(v.jsxs)(b.a.Group,{children:[Object(v.jsx)(b.a.Label,{children:"Enter the form version"}),Object(v.jsx)(b.a.Control,{onChange:function(t){e.setNewFormVersion(t.target.value)}}),Object(v.jsx)(b.a.Text,{children:'This must match the "version" field in your xlsx settings tab'})]}),Object(v.jsxs)(b.a.Group,{children:[Object(v.jsx)(b.a.Label,{children:"Select your file"}),Object(v.jsx)(b.a.Control,{type:"file",size:"lg",onChange:function(t){return e.setSelectedFile(t.target.files[0])}})]}),Object(v.jsx)(m.a,{onClick:Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lt(e.authToken,e.selectedProject,e.newFormName,e.newFormVersion,e.selectedFile);case 2:return t.next=4,e.GetProjectInformation({authToken:e.authToken,setProjectInformation:e.setProjectInformation});case 4:case"end":return t.stop()}}),t)}))),children:"Submit"})]})})}function bt(e){console.log("Draft form data");var t=Object(r.useState)([]),a=Object(s.a)(t,2),n=a[0],c=a[1];console.log(e.data);var o=["No Projects"],l=!0;return void 0!==e.data&null!==e.data&&(void 0!==e.data.projects&&(o=e.data.projects.map((function(e){return e.name})),l=!1),0===e.data.projects.length&&(o=["No Projects"],l=!0)),console.log(o),console.log(e.data),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(b.a,{children:[Object(v.jsxs)(b.a.Group,{children:[Object(v.jsx)(b.a.Label,{children:"Select the form you would like to update"}),Object(v.jsxs)(b.a.Select,{defaultValue:"Select a Project",onChange:function(t){e.setSelectedDraftProject(t.target.value);var a=[];void 0!==e.data&null!==e.data&&(void 0!==e.data.forms&&(e.data.forms.map((function(e){e.project===t.target.value&&a.push(e.name)})),c(a)),0===e.data.projects.length&&c([]))},disabled:l,"aria-label":"Default select example",children:[Object(v.jsx)("option",{disabled:!0,children:"Select a Project"}),o.map((function(e){return Object(v.jsx)("option",{children:e})}))]})]}),Object(v.jsxs)(b.a.Group,{children:[Object(v.jsx)(b.a.Label,{children:"Select the form you would like to update"}),Object(v.jsxs)(b.a.Select,{defaultValue:"Select a form",onChange:function(t){e.setNewDraftFormName(t.target.value)},"aria-label":"Default select example",children:[Object(v.jsx)("option",{disabled:!0,children:"Select a form"}),n.map((function(e){return Object(v.jsx)("option",{children:e})}))]})]}),Object(v.jsxs)(b.a.Group,{children:[Object(v.jsx)(b.a.Label,{children:"Enter the new form version"}),Object(v.jsx)(b.a.Control,{onChange:function(t){e.setNewDraftFormVersion(t.target.value)}}),Object(v.jsx)(b.a.Text,{children:'This must match the "version" field in your xlsx settings tab, please ensure it is different to the previous version'})]}),Object(v.jsxs)(b.a.Group,{children:[Object(v.jsx)(b.a.Label,{children:"Select your file"}),Object(v.jsx)(b.a.Control,{type:"file",size:"lg",onChange:function(t){return e.setSelectedDraftFile(t.target.files[0])}})]}),Object(v.jsx)(m.a,{onClick:Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dt(e.authToken,e.selectedDraftProject,e.newDraftFormName,e.newDraftFormVersion,e.selectedDraftFile);case 2:return t.next=4,e.GetProjectInformation({authToken:e.authToken,setProjectInformation:e.setProjectInformation});case 4:case"end":return t.stop()}}),t)}))),children:"Submit"})]})})}function mt(e){return console.log(e),e.data?void 0!==e.data.projects?Object(v.jsx)("div",{children:Object(v.jsxs)(D.a,{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"#"},"table-head-item-1"),Object(v.jsx)("th",{children:"Project Name"},"table-head-item-2"),Object(v.jsx)("th",{children:"Description"},"table-head-item-3")]},"table-row-1")},"table-header"),Object(v.jsx)("tbody",{children:e.data.projects.map((function(t,a){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:Object(v.jsx)(m.a,{variant:"danger",onClick:Object(u.a)(j.a.mark((function a(){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ot(e.authToken,t.name);case 2:case"end":return a.stop()}}),a)}))),children:"Delete"})},"table-row-"+a+"-item-1"),Object(v.jsx)("td",{children:t.name},"table-row-"+a+"-item-2"),Object(v.jsx)("td",{children:t.description},"table-row-"+a+"-item-3")]},"table-row-"+a)}))},"table-body")]})}):void 0:Object(v.jsx)("div",{children:Object(v.jsxs)(D.a,{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"#"},"table-head-item-1"),Object(v.jsx)("th",{children:"Project Name"},"table-head-item-2"),Object(v.jsx)("th",{children:"Description"},"table-head-item-3")]},"table-row-1")},"table-header"),Object(v.jsx)("tbody",{children:Object(v.jsx)("tr",{children:Object(v.jsx)("td",{colSpan:3,children:"No projects found"})})})]})})}function pt(e){return ft.apply(this,arguments)}function ft(){return(ft=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i()({url:"https://auth.l-gorman.com/api/admin",method:"post",headers:{Authorization:t.authToken},data:{email:t.newAdmin}});case 3:return a=e.sent,console.log(a),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Ot(){var e=Object(r.useContext)(g),t=Object(s.a)(e,2),a=t[0],n=(t[1],Object(r.useState)(null)),c=Object(s.a)(n,2),o=c[0],l=c[1],i=Object(r.useState)(null),d=Object(s.a)(i,2),p=d[0],f=d[1],O=Object(r.useState)(null),x=Object(s.a)(O,2),w=x[0],k=x[1],S=Object(r.useState)(null),y=Object(s.a)(S,2),N=y[0],D=y[1],C=Object(r.useState)(null),T=Object(s.a)(C,2),F=T[0],P=T[1],A=Object(r.useState)(null),I=Object(s.a)(A,2),_=I[0],E=I[1],L=Object(r.useState)(null),R=Object(s.a)(L,2),G=R[0],U=R[1],z=Object(r.useState)(null),B=Object(s.a)(z,2),H=B[0],q=B[1],M=Object(r.useState)(null),K=Object(s.a)(M,2),V=K[0],Y=K[1],W=Object(r.useState)(null),X=Object(s.a)(W,2),Z=X[0],$=X[1],ee=Object(r.useState)(null),te=Object(s.a)(ee,2),ae=te[0],re=te[1],ne=Object(r.useState)(null),ce=Object(s.a)(ne,2),oe=ce[0],se=ce[1];return Object(r.useEffect)(Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at({authToken:a,setProjectInformation:l});case 2:case"end":return e.stop()}}),e)}))),[]),Object(v.jsx)("div",{id:"project-management-container",className:"sub-page-container",children:Object(v.jsxs)(h.a,{className:"main-card border-0",children:[Object(v.jsx)(h.a.Header,{className:" bg-dark text-white",children:Object(v.jsx)("h3",{children:"Creating Forms/Projects"})}),Object(v.jsx)(h.a.Body,{children:Object(v.jsxs)(tt.a,{defaultActiveKey:"0",children:[Object(v.jsxs)(tt.a.Item,{eventKey:"0",children:[Object(v.jsx)(tt.a.Header,{children:"Projects"}),Object(v.jsx)(tt.a.Body,{children:Object(v.jsx)(mt,{GetProjectInformation:at,setProjectInformation:l,data:o,authToken:a})})]}),Object(v.jsxs)(tt.a.Item,{eventKey:"1",children:[Object(v.jsx)(tt.a.Header,{children:"Create a Project"}),Object(v.jsx)(tt.a.Body,{children:Object(v.jsx)(ut,{GetProjectInformation:at,setProjectInformation:l,newProjectName:p,setNewProjectName:f,newProjectDescription:w,setNewProjectDescription:k,authToken:a})})]}),Object(v.jsxs)(tt.a.Item,{eventKey:"2",children:[Object(v.jsx)(tt.a.Header,{children:"Create a Form"}),Object(v.jsx)(tt.a.Body,{children:Object(v.jsx)(ht,{GetProjectInformation:at,setProjectInformation:l,authToken:a,data:o,selectedFile:F,setSelectedFile:P,setNewFormName:E,newFormName:_,setNewFormVersion:U,newFormVersion:G,setSelectedProject:D,selectedProject:N})})]}),Object(v.jsxs)(tt.a.Item,{eventKey:"3",children:[Object(v.jsx)(tt.a.Header,{children:"Update Draft Form"}),Object(v.jsx)(tt.a.Body,{children:Object(v.jsx)(bt,{GetProjectInformation:at,setProjectInformation:l,authToken:a,data:o,selectedDraftFile:V,setSelectedDraftFile:Y,setNewDraftFormName:$,newDraftFormName:Z,setNewDraftFormVersion:re,newDraftFormVersion:ae,setSelectedDraftProject:q,selectedDraftProject:H})})]}),Object(v.jsxs)(tt.a.Item,{eventKey:"4",children:[Object(v.jsx)(tt.a.Header,{children:"Add Administrator"}),Object(v.jsx)(tt.a.Body,{children:Object(v.jsx)(b.a,{children:Object(v.jsx)(J.a,{children:Object(v.jsx)(Q.a,{md:"4",children:Object(v.jsxs)(b.a.Group,{children:[Object(v.jsx)(b.a.Label,{children:"User Email"}),Object(v.jsx)(b.a.Control,{type:"email",onChange:function(e){se(e.target.value)}}),Object(v.jsx)(m.a,{className:"border-0 bg-dark",style:{marginTop:"10px"},onClick:Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pt({authToken:a,newAdmin:oe});case 1:case"end":return e.stop()}}),e)}))),children:"Add User"})]})})})})})]})]})})]})})}function xt(){var e=Object(r.useContext)(g),t=Object(s.a)(e,2),a=t[0],n=t[1],c=Object(r.useContext)(me),o=Object(s.a)(c,2),l=(o[0],o[1]);Object(x.g)();return Object(r.useEffect)((function(){we({setAuthToken:n})}),[]),Object(r.useEffect)((function(){ge({authToken:a,setUserInfo:l})}),[a]),console.log("Auth token context"),console.log(a),a?Object(v.jsxs)(ce.a,{children:[Object(v.jsx)(et,{}),Object(v.jsxs)(x.d,{children:[Object(v.jsx)(x.b,{exact:!0,path:"/",children:Object(v.jsx)(x.a,{from:"/",to:"/home"})}),Object(v.jsx)(x.b,{path:"/home",component:be}),Object(v.jsx)(x.b,{path:"/projects/:projectName/forms/:formName",component:Je}),Object(v.jsx)(x.b,{path:"/projects/:projectName",component:Re}),Object(v.jsx)(x.b,{path:"/projects",children:Object(v.jsx)(Te,{})}),Object(v.jsx)(x.b,{path:"/data-querying",component:Y}),Object(v.jsx)(x.b,{path:"/administration",component:Ot})]})]}):a?void 0:Object(v.jsx)(ce.a,{children:Object(v.jsxs)(x.d,{children:[Object(v.jsx)(x.b,{exact:!0,path:"/",children:Object(v.jsx)(x.a,{from:"/",to:"/login"})}),Object(v.jsx)(x.b,{path:"/register",children:Object(v.jsx)(re,{})}),Object(v.jsx)(x.b,{path:"/login",children:Object(v.jsx)(N,{})})]})})}var gt=function(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(null),o=Object(s.a)(c,2),l=o[0],i=o[1];return Object(v.jsx)(g.Provider,{value:[a,n],children:Object(v.jsx)(me.Provider,{value:[l,i],children:Object(v.jsx)("div",{className:"main-app-background",children:Object(v.jsx)("div",{className:"main-page",children:Object(v.jsx)(xt,{})})})})})},vt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,214)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),r(e),n(e),c(e),o(e)}))};o.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(gt,{})}),document.getElementById("root")),vt()},45:function(e,t,a){},87:function(e,t,a){}},[[197,1,2]]]);
//# sourceMappingURL=main.71fba572.chunk.js.map